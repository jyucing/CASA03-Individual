<!DOCTYPE html>
<html>
<head>
  <title>Interactive Map with Zoom</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    .map {
      width: 100%;
      height: 100%;
    }
  </style>
</head>
    
<body>
  <div id="map-container">
    <svg id="map" class="map"></svg>
  </div>

  <script>
    const width = 800;
    const height = 600;

    const svg = d3.select("#map")
      .attr("width", width)
      .attr("height", height);

    const g = svg.append("g");

    // 创建缩放行为
    const zoom = d3.zoom()
      .scaleExtent([1, 8]) // 设置最小和最大缩放比例
      .on("zoom", zoomed);

    // 将缩放行为应用到 svg 元素上
    svg.call(zoom);

    function zoomed(event) {
      g.attr("transform", event.transform);
    }

    // 加载地图数据并渲染
    d3.json("https://raw.githubusercontent.com/jyucing/CASA03-Individual/main/output/ITA/ITA.geojson").then(function(data) {
      const projection = d3.geoMercator()
        .fitSize([width, height], data);

      const path = d3.geoPath(projection);

      g.selectAll("path")
        .data(data.features)
        .enter().append("path")
        .attr("d", path)
        .attr("fill", "lightgray")
        .attr("stroke", "black")
        .attr("stroke-width", 0.5);
    });
  </script>
</body>
</html>
